{"version":3,"sources":["components/Numbers.js","components/Form.js","components/Filter.js","services/communication.js","App.js","index.js"],"names":["Numbers","persons","showAll","newFilter","del","personsToShow","filter","person","name","includes","map","number","onClick","id","Form","handleSubmit","newName","newNumber","handleChange","onSubmit","value","onChange","type","Filter","baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","update","put","delet","delete","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","setShowAll","notificationMessage","setNotificationMessage","errorMSG","setErrorMSG","msgTime","useEffect","nameService","initialPersons","findNextId","idList","Math","max","Notification","message","notificationStyle","error","color","console","log","className","style","event","target","length","preventDefault","nameObject","existingPerson","window","confirm","returnedPerson","setTimeout","catch","concat","ReactDOM","render","document","getElementById"],"mappings":"6KAqBeA,EAnBC,SAAC,GAAwC,IAAvCC,EAAsC,EAAtCA,QAASC,EAA6B,EAA7BA,QAASC,EAAoB,EAApBA,UAAWC,EAAS,EAATA,IAErCC,EAAgBH,EACpBD,EACAA,EAAQK,QAAO,SAAAC,GAAM,OAAIA,EAAOC,KAAKC,SAASN,MAEhD,OACA,gCACI,yCACCE,EAAcK,KAAI,SAAAH,GAAM,OACrB,gCACKA,EAAOC,KADZ,IACmBD,EAAOI,OACtB,wBAAQC,QAAS,kBAAMR,EAAIG,EAAOM,GAAIN,EAAOC,OAA7C,sBAFMD,EAAOM,WCkBdC,EA5BF,SAAC,GAAsD,IAArDC,EAAoD,EAApDA,aAAcC,EAAsC,EAAtCA,QAASC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,aAG/C,OACA,uBAAMC,SAAUJ,EAAhB,UACE,gCACE,2CADF,QAGE,uBACEP,KAAM,OACNY,MAAOJ,EACPK,SAAUH,IAEZ,uBARF,UAUE,uBACEV,KAAM,SACNY,MAAOH,EACPI,SAAUH,OAGd,8BACE,wBAAQI,KAAK,SAAb,uBCZSC,EAVA,SAAC,GAAD,IAAEpB,EAAF,EAAEA,UAAWe,EAAb,EAAaA,aAAb,OACb,oDACE,uBACEV,KAAM,SACNY,MAAOjB,EACPkB,SAAUH,Q,gBCNVM,EAAU,eA6BDC,EAPQ,CACnBC,OArBW,WAEX,OADgBC,IAAMC,IAAIJ,GACXK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAoBzCC,OAjBW,SAAAC,GAEX,OADgBN,IAAMO,KAAKV,EAASS,GACrBJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAgBzCI,OAbW,SAACtB,EAAIoB,GAEhB,OADgBN,IAAMS,IAAN,UAAaZ,EAAb,YAAwBX,GAAMoB,GAC/BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAYzCM,MATU,SAACxB,GAEX,OADiBc,IAAMW,OAAN,UAAgBd,EAAhB,YAA2BX,IAC7BgB,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UC4J9BQ,EA1KH,WACV,MAAoCC,mBAAS,IAA7C,mBAAQvC,EAAR,KAAqBwC,EAArB,KACA,EAAmCD,mBAAS,IAA5C,mBAAQxB,EAAR,KAAoB0B,EAApB,KACA,EAAqCF,mBAAS,IAA9C,mBAAQvB,EAAR,KAAoB0B,EAApB,KACA,EAAqCH,mBAAS,IAA9C,mBAAQrC,EAAR,KAAoByC,EAApB,KACA,EAAmCJ,oBAAS,GAA5C,mBAAQtC,EAAR,KAAoB2C,EAApB,KACA,EAAuDL,mBAAS,MAAhE,mBAAQM,EAAR,KAA6BC,EAA7B,KACA,EAAiCP,oBAAS,GAA1C,mBAAQQ,EAAR,KAAkBC,EAAlB,KACMC,EAAU,IAEhBC,qBAAU,WACTC,EACI1B,SACAG,MAAK,SAAAwB,GACJZ,EAAWY,QAEd,IACH,IAgEMC,EAAa,WACjB,IAAMC,EAAStD,EAAQS,KAAI,SAAAH,GAAM,OAAIA,EAAOM,GAAG,KAC/C,OAAO2C,KAAKC,IAAIF,GAAQ,GAGpBG,EAAe,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAClBC,GADuC,EAAZC,MACP,CACtBC,MAAO,UAGT,OAAgB,OAAZH,EACK,MAGLX,IAEFY,EAAoB,CAClBE,MAAO,QAIXC,QAAQC,IAAIhB,GAGV,qBAAKiB,UAAU,eAAeC,MAAON,EAArC,SACGD,MA8BDzC,EAAe,SAACiD,GACM,SAAtBA,EAAMC,OAAO5D,KAEfkC,EAAWyB,EAAMC,OAAOhD,OAEK,WAAtB+C,EAAMC,OAAO5D,KAEpBmC,EAAawB,EAAMC,OAAOhD,OAEI,WAAtB+C,EAAMC,OAAO5D,OAErBoC,EAAauB,EAAMC,OAAOhD,OACtB+C,EAAMC,OAAOhD,MAAMiD,OAAS,EAE9BxB,GAAW,GAIXA,GAAW,KAKjB,OACE,gCACE,2CACA,cAACa,EAAD,CAAcC,QAASb,IACvB,cAAC,EAAD,CAAQ3C,UAAWA,EAAWe,aAAcA,IAC5C,cAAC,EAAD,CAAMH,aAnJQ,SAACoD,GACjBA,EAAMG,iBACN,IAAMC,EAAa,CACf/D,KAAMQ,EACNL,OAAQM,EACRJ,GAAIyC,KAERS,QAAQC,IAAIV,KACZ,IAAMkB,EAAiBvE,EAAQK,QAAO,SAAAC,GAAM,OAAIA,EAAOC,OAAS+D,EAAW/D,QAEvEgE,EAAeH,OAAS,EAEXI,OAAOC,QAAP,UAAkB1D,EAAlB,wEAGboC,EACCjB,OAAOqC,EAAe,GAAG3D,GAAI0D,GAC7B1C,MAAK,SAAA8C,GACJlC,EAAWxC,EAAQS,KAAI,SAAAH,GAAM,OAAIA,EAAOM,KAAO2D,EAAe,GAAG3D,GAAKN,EAASoE,MAC/EjC,EAAW,IACXC,EAAa,IACbI,EAAuB,sBAAD,OAAuBwB,EAAW/D,OACxDoE,YAAW,WACT7B,EAAuB,QACtBG,MAEJ2B,OAAM,SAAAhB,GACLd,EAAuBc,EAAM/B,SAASC,MAEtCkB,GAAY,GAEZ2B,YAAW,WACT7B,EAAuB,MACvBE,GAAY,KACXC,MAMPE,EACGpB,OAAOuC,GACP1C,MAAK,SAAA8C,GACJlC,EAAWxC,EAAQ6E,OAAOH,IAC1BjC,EAAW,IACXC,EAAa,IACbI,EAAuB,SAAD,OAAUwB,EAAW/D,OAC3CoE,YAAW,WACT7B,EAAuB,QACtBG,MAEJ2B,OAAM,SAAAhB,GACLd,EAAuB,gDACvBE,GAAY,GACZ2B,YAAW,WACT7B,EAAuB,MACvBE,GAAY,KACXC,GACHa,QAAQC,IAAIH,EAAM/B,SAASC,UAyFAf,QAASA,EAASC,UAAWA,EAAWC,aAAcA,IACrF,cAAC,EAAD,CAASjB,QAASA,EAASC,QAASA,EAASC,UAAWA,EAAWC,IAtD3D,SAACS,EAAIL,GACAiE,OAAOC,QAAP,iBAAyBlE,EAAzB,OAGb4C,EACGf,MAAMxB,GACNgB,MAAM,SAAAC,GACLW,EAAWxC,EAAQK,QAAO,SAAAC,GAAM,OAAIA,EAAOM,KAAOA,MAClDkC,EAAuB,kBAAD,OAAmBvC,EAAnB,6BACtBoE,YAAW,WACT7B,EAAuB,QACtBG,MAEJ2B,OAAM,SAAAhB,GACLd,EAAuB,kBAAD,OAAmBvC,EAAnB,0CACtByC,GAAY,GACZR,EAAWxC,EAAQK,QAAO,SAAAC,GAAM,OAAIA,EAAOM,KAAOA,MAClD+D,YAAW,WACT7B,EAAuB,MACvBE,GAAY,KACXC,a,MCrIb6B,IAASC,OACL,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.04ee9dc2.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Numbers = ({persons, showAll, newFilter, del}) => {\r\n\r\n    const personsToShow = showAll\r\n    ? persons\r\n    : persons.filter(person => person.name.includes(newFilter))\r\n\r\n    return(\r\n    <div>\r\n        <h2>Numbers</h2>\r\n        {personsToShow.map(person =>\r\n            <div key={person.id}>\r\n                {person.name} {person.number} \r\n                <button onClick={() => del(person.id, person.name)}>delete</button>\r\n            </div>\r\n        )}\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default Numbers","import React from 'react'\r\n\r\nconst Form = ({handleSubmit, newName, newNumber, handleChange}) => {\r\n \r\n\r\n  return(\r\n  <form onSubmit={handleSubmit}>\r\n    <div>\r\n      <h2>add a new</h2>\r\n      name: \r\n      <input \r\n        name={\"name\"}\r\n        value={newName} \r\n        onChange={handleChange}\r\n      />\r\n      <br />\r\n      number: \r\n      <input \r\n        name={\"number\"}\r\n        value={newNumber} \r\n        onChange={handleChange}\r\n      />\r\n    </div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n  ) \r\n}\r\n\r\nexport default Form","import React from 'react'\r\n\r\nconst Filter = ({newFilter, handleChange}) => (\r\n  <div>filter shown with\r\n    <input\r\n      name={\"filter\"}\r\n      value={newFilter}\r\n      onChange={handleChange}>\r\n    </input>\r\n  </div>\r\n) \r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst delet = (id) => {\r\n    const request =  axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst exportedObject = {\r\n    getAll,\r\n    create,\r\n    update,\r\n    delet\r\n}\r\n\r\nexport default exportedObject","import React, { useEffect, useState } from 'react'\nimport Numbers from './components/Numbers'\nimport Form from './components/Form'\nimport Filter from './components/Filter'\nimport nameService from './services/communication'\n\nconst App = () => {\n  const [ persons,     setPersons ] = useState([]) \n  const [ newName,    setNewName ] = useState('')\n  const [ newNumber,  setNewNumber ] = useState('')\n  const [ newFilter,  setNewFilter ] = useState('')\n  const [ showAll,    setShowAll ] = useState(true)\n  const [ notificationMessage, setNotificationMessage] = useState(null) \n  const [ errorMSG, setErrorMSG] = useState(false) \n  const msgTime = 3000\n\n  useEffect(() => {\n   nameService\n      .getAll()   \n      .then(initialPersons => {              \n        setPersons(initialPersons)      \n    })\n  }, [])\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n        name: newName,\n        number: newNumber,\n        id: findNextId()\n    }\n    console.log(findNextId())\n    const existingPerson = persons.filter(person => person.name === nameObject.name)\n   \n    if (existingPerson.length > 0)\n    {\n      const result = window.confirm(`${newName} is already added to phonebook, replace old number with a new one?`)\n      if (result)\n      {\n        nameService\n        .update(existingPerson[0].id, nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== existingPerson[0].id ? person : returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setNotificationMessage(`Changed number for ${nameObject.name}`)  \n          setTimeout(() => {          \n            setNotificationMessage(null)       \n          }, msgTime)\n        })\n        .catch(error => {\n          setNotificationMessage(error.response.data)\n          //setNotificationMessage(`Information of ${nameObject.name} has already been removed from server`)\n          setErrorMSG(true)\n          //setPersons(persons.filter(person => person.id !== existingPerson[0].id) )\n          setTimeout(() => {          \n            setNotificationMessage(null)       \n            setErrorMSG(false)\n          }, msgTime)\n        })\n      }\n    }\n    else\n    { \n      nameService\n        .create(nameObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setNotificationMessage(`Added ${nameObject.name}`)  \n          setTimeout(() => {          \n            setNotificationMessage(null)       \n          }, msgTime)\n        })\n        .catch(error => {\n          setNotificationMessage(`Number has to be at least 8 characters long.`)\n          setErrorMSG(true)\n          setTimeout(() => {          \n            setNotificationMessage(null)       \n            setErrorMSG(false)\n          }, msgTime)\n          console.log(error.response.data)\n        })\n    }\n  } \n  \n  //Finds biggest id number and returns number bigger by one. Othervise removing person before last person of the list might create error when trying to add new person.\n  const findNextId = () =>{\n    const idList = persons.map(person => person.id+1)\n    return Math.max(idList)+1\n  }\n\n  const Notification = ({ message, error }) => {\n    var notificationStyle = {   \n      color: \"green\",\n    }\n\n    if (message === null) {\n      return null\n    }\n\n    if (errorMSG)\n    {\n      notificationStyle = {   \n        color: 'red'\n      }\n    }\n\n    console.log(errorMSG)\n\n    return (\n      <div className='notification' style={notificationStyle}>\n        {message}\n      </div>\n    )\n  }\n\n  const del = (id, name) => {    \n    const result = window.confirm(`Delete ${name}?`)\n    if (result)\n    {\n      nameService\n        .delet(id)\n        .then( response => {\n          setPersons(persons.filter(person => person.id !== id) )\n          setNotificationMessage(`Information of ${name} was removed from server`)\n          setTimeout(() => {          \n            setNotificationMessage(null)       \n          }, msgTime)\n        })\n        .catch(error => {\n          setNotificationMessage(`Information of ${name} has already been removed from server`)\n          setErrorMSG(true)\n          setPersons(persons.filter(person => person.id !== id) )\n          setTimeout(() => {          \n            setNotificationMessage(null)  \n            setErrorMSG(false)\n          }, msgTime)\n        })\n    }\n  }\n\n  const handleChange = (event) => {\n    if (event.target.name === \"name\")\n    {\n      setNewName(event.target.value)\n    }\n    else if (event.target.name === \"number\")\n    {\n      setNewNumber(event.target.value)\n    } \n    else if  (event.target.name === \"filter\")\n    {\n      setNewFilter(event.target.value)\n      if (event.target.value.length > 0)\n      {\n        setShowAll(false)\n      }\n      else\n      {\n        setShowAll(true)\n      }\n    }\n  }\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage}/>\n      <Filter newFilter={newFilter} handleChange={handleChange} />\n      <Form handleSubmit={addPerson} newName={newName} newNumber={newNumber} handleChange={handleChange} />\n      <Numbers persons={persons} showAll={showAll} newFilter={newFilter} del={del} />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)"],"sourceRoot":""}